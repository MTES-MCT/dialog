{% set uuid = location.uuid %}
{% set deleteCsrfToken = csrf_token('delete-location') %}


<turbo-frame id="block_location_{{ uuid }}">
    <div class="app-card fr-mt-3w" data-testid="location">
        <div class="app-card__icon">
            <span class="fr-icon-map-pin-2-fill fr-x-icon-decorative--blue-france fr-x-icon--xl" aria-hidden="true"></span>
        </div>

        <div class="app-card__content">
            <h3 class="fr-h4">
                {{ location.address.roadName ? location.address.roadName : location.address.city }}
            </h3>
            <ul class="fr-ml-1w fr-my-0 fr-list">
                <li>{{ location.address.city }} ({{ location.address.postCode }})</li>
                {% if location.address.roadName %}
                    <li>
                        {{ location.address.roadName }}

                        {% if location.fromHouseNumber and location.toHouseNumber %}
                            - {{ 'regulation.location.house_number_from_to'|trans({ '%from%': location.fromHouseNumber, '%to%': location.toHouseNumber }) }}
                        {% elseif location.fromHouseNumber %}
                            - {{ 'regulation.location.house_number_from'|trans({ '%from%': location.fromHouseNumber }) }}
                        {% elseif location.toHouseNumber %}
                            - {{ 'regulation.location.house_number_to'|trans({ '%to%': location.toHouseNumber }) }}
                        {% endif %}
                    </li>
                {% endif %}
                <li>{{ 'regulation.location.all_vehicles_forbidden'|trans }}</li>
            </ul>
        </div>
        {% if regulationOrderRecord.isDraft %}
            <ul class="app-card__actions">
                {% if not isFirstLocation %}
                    <li>
                        <form
                            method="delete"
                            action="{{ path('fragment_regulations_location_delete', { regulationOrderRecordUuid: regulationOrderRecord.uuid, uuid: location.uuid }) }}"
                            data-controller="form-submit"
                            data-form-submit-event-name-value="modal-trigger:submit"
                        >
                            <button
                                class="fr-btn fr-btn--tertiary-no-outline fr-btn--icon-left fr-icon-delete-line"
                                data-controller="modal-trigger"
                                data-modal-trigger-modal-outlet="#location-delete-modal"
                                data-modal-trigger-key-value="{{ location.uuid }}"
                                data-action="modal-trigger#showModal:prevent"
                                aria-controls="location-delete-modal"
                                title="{{ 'common.delete'|trans }}"
                            >
                                {{ 'common.delete'|trans }}
                            </button>
                            <input type="hidden" name="token" value="{{ deleteCsrfToken }}" />
                        </form>
                    </li>
                {% endif %}
                <li>
                    <a href="{{ path('fragment_regulations_location_update', { regulationOrderRecordUuid: regulationOrderRecord.uuid, uuid: location.uuid }) }}" class="fr-btn fr-btn--tertiary fr-btn--icon-left fr-icon-edit-line">
                        {{ 'common.update'|trans }}
                    </a>
                </li>
            </ul>
        {% endif %}
    </div>
</turbo-frame>
