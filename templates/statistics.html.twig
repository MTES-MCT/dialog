{% extends 'layouts/layout.html.twig' %}

{% block title %}
    {{ 'statistics.title'|trans }} - {{ parent() }}
{% endblock %}

{% block body %}
    <div class="fr-container fr-x-max-w-156w fr-py-2w fr-py-md-5w">
        <h1 class="fr-h1">{{ 'statistics.title'|trans }}</h1>

        <d-responsive-iframe
            maxWidth="1200" {# Corresponds to 156w #}
            extraPadding="32"
            targetOrigin="{{ app.request.schemeAndHttpHost }}"
        >
            <iframe
                src="{{ dashboardEmbedUrl }}"
                frameborder="0"
                width="1200"
                height="1200"
                allowtransparency
                title="{{ 'statistics.dashboard.title'|trans }}"
                data-testid="dashboard"
            ></iframe>
        </d-responsive-iframe>

        <section class="fr-mt-3w"
            data-controller="stats-map"
            data-stats-map-api-url-value="{{ path('api_stats_organizations_geometries') }}"
        >
            <h2 class="fr-h4 fr-mb-2w">{{ 'statistics.map.title'|trans }}</h2>
            <p class="fr-text--sm fr-mb-3w">
                {{ 'statistics.map.description'|trans }}
            </p>

            <div class="stats-map-main-container">
                <div data-stats-map-target="mainMap" class="stats-map-main"></div>
            </div>

            <div class="fr-mt-3w">
                <h3 class="fr-h6 fr-mb-2w">{{ 'statistics.map.overseas.title'|trans }}</h3>
                <div class="stats-map-overseas-grid">
                    <div class="stats-overseas-map">
                        <div class="stats-overseas-map-title">{{ 'statistics.map.overseas.guadeloupe'|trans }}</div>
                        <div data-stats-map-target="overseasMap" class="stats-overseas-map-container"></div>
                    </div>
                    <div class="stats-overseas-map">
                        <div class="stats-overseas-map-title">{{ 'statistics.map.overseas.martinique'|trans }}</div>
                        <div data-stats-map-target="overseasMap" class="stats-overseas-map-container"></div>
                    </div>
                    <div class="stats-overseas-map">
                        <div class="stats-overseas-map-title">{{ 'statistics.map.overseas.guyane'|trans }}</div>
                        <div data-stats-map-target="overseasMap" class="stats-overseas-map-container"></div>
                    </div>
                    <div class="stats-overseas-map">
                        <div class="stats-overseas-map-title">{{ 'statistics.map.overseas.reunion'|trans }}</div>
                        <div data-stats-map-target="overseasMap" class="stats-overseas-map-container"></div>
                    </div>
                    <div class="stats-overseas-map">
                        <div class="stats-overseas-map-title">{{ 'statistics.map.overseas.mayotte'|trans }}</div>
                        <div data-stats-map-target="overseasMap" class="stats-overseas-map-container"></div>
                    </div>
                </div>
            </div>
        </section>
    </div>
{% endblock %}
